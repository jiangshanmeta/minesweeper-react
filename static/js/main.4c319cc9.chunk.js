(this["webpackJsonpminesweeper-react"]=this["webpackJsonpminesweeper-react"]||[]).push([[0],[,,,,,,,,,function(e,t,a){e.exports=a(19)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(3),c=a.n(s),r=(a(14),a(1));a(15),a(16);function l(e){var t=e.value,a=e.setValue,s=e.min,c=void 0===s?-1/0:s,r=e.max,l=void 0===r?1/0:r,o=e.step,u=void 0===o?1:o;function m(e){Number.isNaN(e)||e>l||e<c||a(e)}return Object(n.useEffect)((function(){t>l&&a(l),t<c&&a(c)}),[c,l,t,a]),i.a.createElement("div",{className:"input-group"},i.a.createElement("div",{className:"input-group-addon",onClick:function(){return m(t-u)}},"-"),i.a.createElement("input",{className:"form-control",value:e.value,onChange:function(e){return m(Number(e.target.value))}}),i.a.createElement("div",{className:"input-group-addon",onClick:function(){return m(t+u)}},"+"))}function o(e){var t=Object(n.useState)(!1),a=Object(r.a)(t,2),s=a[0],c=a[1],o=Object(n.useState)(30),u=Object(r.a)(o,2),m=u[0],f=u[1],h=Object(n.useState)(16),d=Object(r.a)(h,2),p=d[0],v=d[1],E=Object(n.useState)(99),b=Object(r.a)(E,2),N=b[0],w=b[1];return i.a.createElement("div",{className:"app-section select-difficulty"},i.a.createElement("div",{className:"select-difficulty-container ".concat(s?"show-customize":"")},i.a.createElement("div",{className:"select-difficulty-section"},i.a.createElement("div",{className:"select-difficulty-row"},i.a.createElement("div",{className:"select-difficulty-item",onClick:function(){return e.showGame(8,8,10)}},i.a.createElement("div",null,"8 x 8"),i.a.createElement("div",null,"10 \u4e2a\u96f7")),i.a.createElement("div",{className:"select-difficulty-item",onClick:function(){return e.showGame(16,16,40)}},i.a.createElement("div",null,"16 x 16"),i.a.createElement("div",null,"40 \u4e2a\u96f7"))),i.a.createElement("div",{className:"select-difficulty-row"},i.a.createElement("div",{className:"select-difficulty-item",onClick:function(){return e.showGame(30,16,99)}},i.a.createElement("div",null,"30 x 16"),i.a.createElement("div",null,"99 \u4e2a\u96f7")),i.a.createElement("div",{className:"select-difficulty-item",onClick:function(){return c(!0)}},i.a.createElement("div",null,"?"),i.a.createElement("div",null,"\u81ea\u5b9a\u4e49")))),i.a.createElement("div",{className:"select-difficulty-section"},i.a.createElement("div",null,i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{className:"form-label"},"\u5bbd\u5ea6"),i.a.createElement(l,{value:m,setValue:f,max:50,min:1})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{className:"form-label"},"\u9ad8\u5ea6"),i.a.createElement(l,{value:p,setValue:v,max:50,min:1})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{className:"form-label"},"\u96f7\u6570"),i.a.createElement(l,{value:N,setValue:w,max:m*p,min:1})),i.a.createElement("div",{className:"form-group"},i.a.createElement("button",{className:"mine-sweeper-button",onClick:function(){return e.showGame(m,p,N)}},"\u73a9\u6e38\u620f")),i.a.createElement("div",{className:"form-group"},i.a.createElement("button",{className:"mine-sweeper-button",onClick:function(){return c(!1)}},"\u53d6\u6d88"))))))}var u=a(4),m=a(5),f=a(7),h=a(6),d=a(8);a(17);var p={fontSize:60},v={marginTop:"15px"},E=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(f.a)(this,Object(h.a)(t).call(this,e))).reStart=function(){var e=a.props,t=e.width,n=e.height,i=e.mineCount;a.init(t,n,i)},a.selectDifficulty=function(){a.props.selectDifficulty()},a.handleContextMenu=function(e){e.preventDefault()},a.state={isEnd:!1,mines:[],openStatus:[],markStatus:[],neighbourMineCount:[],selectedMineCount:0},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidUpdate",value:function(e,t){var a=this;(this.props.play&&!e.play&&this.init(this.props.width,this.props.height,this.props.mineCount),this.state.selectedMineCount!==t.selectedMineCount&&this.state.selectedMineCount===this.props.mineCount)&&(this.state.mines.every((function(e,t){return!!(e&&1===a.state.markStatus[t]||!e&&1!==a.state.markStatus[t])}))&&this.setState({isEnd:!0},(function(){alert("win")})))}},{key:"init",value:function(e,t,a){for(var n=e*t,i=new Array(n).fill(0),s=0;s<a;s++)i[s]=1;!function(e,t){for(var a=1;a<e.length;a++){var n=Math.floor(Math.random()*(a+1)),i=e[n];e[n]=e[a],e[a]=i}}(i);var c=function(e,t,a){for(var n=new Array(a.length).fill(0),i=0;i<n.length;i++)if(a[i])for(var s=i%e,c=(i-s)/e,r=-1;r<2;r++){var l=c+r;if(!(l<0||l===t))for(var o=-1;o<2;o++){var u=s+o;u<0||u===e||n[l*e+u]++}}return n}(e,t,i);this.setState({isEnd:!1,mines:i,openStatus:new Array(n).fill(0),markStatus:new Array(n).fill(0),neighbourMineCount:c,selectedMineCount:0})}},{key:"handleClickLeft",value:function(e,t){if(!this.state.isEnd){var a=e*this.props.width+t;if(1!==this.state.openStatus[a]&&1!==this.state.markStatus[a]){if(this.state.mines[a]){var n=this.state.openStatus.slice(0);return n[a]=1,void this.setState({isEnd:!0,openStatus:n},(function(){alert("mine")}))}if(this.state.neighbourMineCount[a]>0){var i=this.state.openStatus.slice(0);return i[a]=1,void this.setState({openStatus:i})}var s=this.state.openStatus.slice(0);!function e(t,a,n,i,s,c){if(!(t<0||a<0||t===s||a===i)){var r=t*i+a;if(1!==n[r]&&(n[r]=1,!(c[r]>0)))for(var l=-1;l<2;l++)for(var o=-1;o<2;o++)e(t+l,a+o,n,i,s,c)}}(e,t,s,this.props.width,this.props.height,this.state.neighbourMineCount),this.setState({openStatus:s})}}}},{key:"handleClickRight",value:function(e,t){if(!this.state.isEnd){var a=e*this.props.width+t;if(1!==this.state.openStatus[a]){var n=this.state.markStatus.slice(0);n[a]=(n[a]+1)%3;var i=this.state.selectedMineCount;2===n[a]?i--:1===n[a]&&i++,this.setState({markStatus:n,selectedMineCount:i})}}}},{key:"renderMines",value:function(){for(var e=this,t=[],a=function(a){for(var n=[],s=function(t){var s=a*e.props.width+t,c=null;1===e.state.markStatus[s]?c=i.a.createElement("span",{className:"iconfont"},"\ue778"):2===e.state.markStatus[s]?c=i.a.createElement("span",{className:"iconfont"},"\ue720"):1===e.state.openStatus[s]&&(e.state.mines[s]?c=i.a.createElement("span",{className:"iconfont"},"\ue63a"):e.state.neighbourMineCount[s]>0&&(c=i.a.createElement("span",null,e.state.neighbourMineCount[s]))),n.push(i.a.createElement("div",{className:"mine-sweeper-item ".concat(e.state.openStatus[s]?"is-open":""),key:t,onClick:function(){return e.handleClickLeft(a,t)},onContextMenu:function(n){return e.handleClickRight(a,t)}},c))},c=0;c<e.props.width;c++)s(c);t.push(i.a.createElement("div",{className:"mine-sweeper-row",key:a},n))},n=0;n<this.props.height;n++)a(n);return i.a.createElement("div",{className:"mine-sweeper-container",onContextMenu:this.handleContextMenu},t)}},{key:"render",value:function(){return i.a.createElement("div",{className:"app-section game-container"},this.renderMines(),i.a.createElement("div",{className:"panel-container"},i.a.createElement("div",{className:"panel-data-container"},i.a.createElement("span",{className:"iconfont",style:p},"\ue778"),i.a.createElement("div",null,this.state.selectedMineCount," / ",this.props.mineCount)),i.a.createElement("div",null,i.a.createElement("button",{className:"mine-sweeper-button",onClick:this.reStart},"\u91cd\u5f00\u4e00\u5c40"),i.a.createElement("button",{className:"mine-sweeper-button",style:v,onClick:this.selectDifficulty},"\u6539\u53d8\u96be\u5ea6"))))}}]),t}(i.a.PureComponent);a(18);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement((function(){var e=Object(n.useState)(!1),t=Object(r.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(0),l=Object(r.a)(c,2),u=l[0],m=l[1],f=Object(n.useState)(0),h=Object(r.a)(f,2),d=h[0],p=h[1],v=Object(n.useState)(0),b=Object(r.a)(v,2),N=b[0],w=b[1];return i.a.createElement("div",{className:"app"},i.a.createElement("div",{className:"app-main ".concat(a?"show-game":"")},i.a.createElement(o,{showGame:function(e,t,a){s(!0),m(e),p(t),w(a)}}),i.a.createElement(E,{selectDifficulty:function(){s(!1)},play:a,width:u,height:d,mineCount:N})))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[9,1,2]]]);
//# sourceMappingURL=main.4c319cc9.chunk.js.map